
# MLdeployment

A collection of machine learning deployment examples using FastAPI, Prometheus metrics, and Docker.

## Projects

### 1. my_ml_app

A FastAPI-based Iris classifier with Prometheus metrics, containerized with Docker.

#### Project Structure

```
my_ml_app/
├── app.py
├── train_model.py
├── model.pkl         # generated by train_model.py
├── requirements.txt
├── Dockerfile
├── README.md
└── venv/             # local Python virtualenv (ignored in Git)
```

#### Prerequisites

- Python 3.8+
- Docker (for building/running the container)
- Git and a GitHub account

#### Local Setup (without Docker)

1. **Clone the repository:**
   ```bash
   git clone https://github.com/<your-username>/MLdeployment.git
   cd MLdeployment/my_ml_app
   ```

2. **Create and activate a virtual environment:**
   ```bash
   python3 -m venv venv
   source venv/bin/activate      # On Windows: venv\Scripts\activate
   ```

3. **Install dependencies:**
   ```bash
   pip install --upgrade pip
   pip install -r requirements.txt
   ```

4. **Train the model (creates `model.pkl`):**
   ```bash
   python train_model.py
   ```

5. **Deactivate the virtual environment:**
   ```bash
   deactivate
   ```

#### Build & Run with Docker

1. **Build the Docker image:**
   ```bash
   docker build -t iris-classifier .
   ```

2. **Run the container:**
   ```bash
   docker run -d --name iris_svc -p 8000:80 iris-classifier
   ```

3. **Test the service:**
   ```bash
   curl http://localhost:8000/           # Health check
   curl -X POST http://localhost:8000/predict \
     -H "Content-Type: application/json" \
     -d '{"sepal_length":5.1,"sepal_width":3.5,"petal_length":1.4,"petal_width":0.2}'
   curl http://localhost:8000/metrics
   ```

